# 健康記録Webサービス要件書

## 概要
個人の健康チェック記録を自由形式で入力し、生成AIによる分析・チャット機能を提供するWebサービス。
ローカル環境またはLAN内で動作し、認証不要でプライベート利用する。

## 機能要件

### 1. 健康記録入力機能
- **入力形式**: 自由形式のテキスト入力
  - 例: 「今日は7時間寝た。朝のランニング30分。気分は普通」
  - 例: 「頭痛がひどい。昨夜2時まで起きてた。コーヒー3杯」
- **UI**: シンプルな大きなテキストエリアと送信ボタン
- **ガイダンス機能**:
  - よく記録される項目の表示
  - 過去の入力例の表示
- **記録頻度**: 1日に何度でも記録可能
- **タイムスタンプ**: 自動付与（ファイル名と内容の両方）

### 2. データストレージ
- **ストレージ**: ローカルファイルシステム
- **形式**: 1入力につき1ファイル
- **永続化**: コンテナの外部ボリュームマウント

### 3. AI分析・チャット機能
- **機能**: 記録データに基づくフリースタイルチャット
  - 例: 「最近の睡眠パターンはどう？」への回答
  - パターン分析、改善提案など
- **チャット履歴**: 保存する（UI表示は後回し）
- **LLM**: ローカルLLM（Ollama）を使用
- **連携**: HTTP API経由でアクセス

### 4. レポート機能
- **形式**: AIチャットによる自然言語での分析
- **グラフ・表**: 当面は実装しない
- **期間**: AIが適切に判断して回答

## 非機能要件

### 1. 技術スタック
- **バックエンド**: Python
- **フロントエンド**: JavaScript（TypeScriptは使用しない）
- **実行環境**: Docker コンテナ
- **データベース**: ファイルシステム

### 2. セキュリティ・認証
- **認証**: 不要（プライベート利用）
- **アクセス制御**: なし

### 3. 運用環境
- **デプロイ先**: ローカルWindows PC またはLAN内デバイス
- **アクセス**: スマートフォンとPCのブラウザから

### 4. 拡張性
- **通知機能**: 将来的に検討（当面はスマートフォンのTODOアプリで代用）

## 制約事項
- ローカルLLMとアプリは異なるOSまたはマシンで動作する可能性がある
- LLMをコンテナで動作させるのは困難で低速になる可能性がある

## 優先順位
1. 基本的な記録入力機能
2. ファイルストレージ
3. AIチャット機能
4. ガイダンス機能
5. チャット履歴表示UI（将来実装）